<!DOCTYPE html>
<html>
<head>
    <title>CPU List</title>
    <!-- jQuery included properly -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<h2>Available CPUs</h2>

<div id="cpuOutput"></div>

<button onclick="fetchAllCPUs()">Get All CPUs</button>
<input type="number" id="cpuIdInput" placeholder="Enter CPU ID">
<button onclick="fetchCPUById(document.getElementById('cpuIdInput').value)">Get CPU by ID</button>

<script>    
    function fetchAllCPUs() {
        $.ajax({
            url: '/cpu/',
            type: 'GET',
            success: function(data) {
                console.log("All CPUs:", data);
                displayCPUs(data);
            },
            error: function() {
                alert('Failed to fetch CPU list.');
            }
        });
    }

    function fetchCPUById(cpuId) {
        $.ajax({
            url: '/cpu/' + cpuId,
            type: 'GET',
            success: function(data) {
                console.log("CPU:", data);
                displaySingleCPU(data);
            },
            error: function() {
                alert('Failed to fetch CPU with ID ' + cpuId);
            }
        });
    }

    function displayCPUs(cpuList) {
        const output = document.getElementById('cpuOutput');
        output.innerHTML = "<h3>CPU List:</h3>";
        const ul = document.createElement('ul');
        cpuList.forEach(cpu => {
            const li = document.createElement('li');
            li.textContent = `ID: ${cpu.id} | Name: ${cpu.name} | Cores: ${cpu.cores}`;
            ul.appendChild(li);
        });
        output.appendChild(ul);
    }

    function displaySingleCPU(cpu) {
        const output = document.getElementById('cpuOutput');
        if (cpu) {
            output.innerHTML = `<p><strong>CPU:</strong> ID: ${cpu.id} | Name: ${cpu.name} | Cores: ${cpu.cores}</p>`;
        } else {
            output.innerHTML = "<p>No CPU found with that ID.</p>";
        }
    }
</script>

</body>
</html>
